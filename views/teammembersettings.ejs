<!DOCTYPE html>
<html lang="en">
    <%- include('partials/navbar') %>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>User Settings</title>
</head>
<body class="usersettings-page">
    <section class="hero">
    </section>
    <div class="settings-page">
        <!-- Left Navigation Column -->
        <nav class="settings-nav">
            <ul>
                <li><a href="#" class="nav-link active" id="reset-password-link">Reset Password</a></li>
                <li><a href="#" class="nav-link" id="admin-key-link">Admin Key</a></li>
                <li><a href="#" class="nav-link" id="edit-account-details-link">Edit Account Details</a></li>
            </ul>
        </nav>

        <!-- Main Content Section -->
        <section class="settings-content">
            <div id="reset-password-section" class="settings-section active">
                <h2>Reset Password</h2>
                <form action="/teammembers/change-password" method="POST" class="change-password-form">
                    <div class="form-group">
                        <label for="current-password">Current Password</label>
                        <input type="password" id="current-password" name="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" name="newPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" name="confirmPassword" required>
                    </div>
                    <button type="submit" class="submit-btn">Change Password</button>
                </form>
            </div>

            <div id="admin-key-section" class="settings-section">
                <h2>Change Admin Key</h2>
                <form action="/teammembers/change-admin-key" method="POST" class="change-admin-key-form">
                    <div class="form-group">
                        <label for="current-admin-key">Current Admin Key</label>
                        <input type="text" id="current-admin-key" name="currentAdminKey" required>
                    </div>
                    <div class="form-group">
                        <label for="new-admin-key">New Admin Key</label>
                        <input type="text" id="new-admin-key" name="newAdminKey" required>
                    </div>
                    <button type="submit" class="submit-btn">Change Admin Key</button>
                </form>
            </div>

            <div id="edit-account-details-section" class="settings-section">
                <h2>Edit Account Details</h2>
                <form action="/teammembers/edit-account" method="POST" class="edit-account-form">
                    <div class="form-group">
                        <label for="edit-first-name">First Name</label>
                        <input type="text" id="edit-first-name" name="memfirstname" value="<%= user?.memfirstname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-last-name">Last Name</label>
                        <input type="text" id="edit-last-name" name="memlastname" value="<%= user?.memlastname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-username">Username</label>
                        <input type="text" id="edit-username" name="username" value="<%= user?.username || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-email">E-Mail</label>
                        <input type="email" id="edit-email" name="mememail" value="<%= user?.mememail || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-phone-number">Phone Number</label>
                        <input type="tel" id="edit-phone-number" name="memphone" value="<%= user?.memphone || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">Street Address</label>
                        <input type="text" id="edit-address" name="memstraddress" value="<%= user?.memstraddress || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-city">City</label>
                        <input type="text" id="edit-city" name="memcity" value="<%= user?.memcity || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-state">State</label>
                        <input type="text" id="edit-state" name="memstate" value="<%= user?.memstate || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-zip">ZIP Code</label>
                        <input type="text" id="edit-zip" name="memzip" value="<%= user?.memzip || '' %>" required>
                    </div>
                    <button type="submit" class="submit-btn">Save Changes</button>
                </form>
            </div>
        </section>
    </div>

    <script>
        // JavaScript to toggle between sections
        const links = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.settings-section');

        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();

                // Remove active class from all links and sections
                links.forEach(l => l.classList.remove('active'));
                sections.forEach(s => s.classList.remove('active'));

                // Add active class to the clicked link and corresponding section
                const targetSectionId = link.id.replace('-link', '-section');
                document.getElementById(targetSectionId).classList.add('active');
                link.classList.add('active');
            });
        });
    </script>
</body>
</html>