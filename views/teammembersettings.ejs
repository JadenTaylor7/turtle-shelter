<!DOCTYPE html>
<html lang="en">
    <%- include('partials/navbar') %>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>User Settings</title>
</head>
<body class="usersettings-page">
    <section class="hero">
    </section>
    <div class="settings-page">
        <!-- Left Navigation Column -->
        <div id="settings-container">
            <nav class="settings-nav">
                <ul>
                    <li><a href="#" class="nav-link active" id="reset-password-link">Reset Password</a></li>
                    <li><a href="#" class="nav-link" id="edit-account-details-link">Edit Account Details</a></li>
                </ul>
            </nav>
        </div>

        <!-- Main Content Section -->
        <section class="settings-content">
            <div id="reset-password-section" class="settings-section active">
                <h2>Reset Password</h2>
                <form action="/teammembers/change-password" method="POST" class="change-password-form">
                    <div class="form-group">
                        <label for="current-password">Current Password</label>
                        <input type="password" id="current-password" name="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" name="newPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" name="confirmPassword" required>
                    </div>
                    <button type="submit" class="submit-btn">Change Password</button>
                </form>
            </div>

            <div id="edit-account-details-section" class="settings-section">
                <h2>Edit Account Details</h2>
                <form action="/teammembers/edit-account" method="POST" class="edit-account-form">
                    <div class="form-group">
                        <label for="edit-first-name">First Name</label>
                        <input type="text" id="edit-first-name" name="memfirstname" value="<%= user?.memfirstname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-last-name">Last Name</label>
                        <input type="text" id="edit-last-name" name="memlastname" value="<%= user?.memlastname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-username">Username</label>
                        <input type="text" id="edit-username" name="username" value="<%= user?.username || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-email">E-Mail</label>
                        <input type="email" id="edit-email" name="mememail" value="<%= user?.mememail || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-phone-number">Phone Number</label>
                        <input type="tel" id="edit-phone-number" name="memphone" value="<%= user?.memphone || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">Street Address</label>
                        <input type="text" id="edit-address" name="memstraddress" value="<%= user?.memstraddress || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-city">City</label>
                        <input type="text" id="edit-city" name="memcity" value="<%= user?.memcity || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-state">State</label>
                        <input type="text" id="edit-state" name="memstate" value="<%= user?.memstate || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-zip">ZIP Code</label>
                        <input type="text" id="edit-zip" name="memzip" value="<%= user?.memzip || '' %>" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Sewing Level</label>
                        <div class="radio-option">
                            <input type="radio" id="none" name="memsewinglevel" value="none" <%= user?.memsewinglevel === 'none' ? 'checked' : '' %> required>
                            <label for="none">none</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="beginner" name="memsewinglevel" value="beginner" <%= user?.memsewinglevel === 'beginner' ? 'checked' : '' %> required>
                            <label for="beginner">beginner</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="intermediate" name="memsewinglevel" value="intermediate" <%= user?.memsewinglevel === 'intermediate' ? 'checked' : '' %> required>
                            <label for="intermediate">intermediate</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="experienced" name="memsewinglevel" value="experienced" <%= user?.memsewinglevel === 'experienced' ? 'checked' : '' %> required>
                            <label for="experienced">experienced</label>
                        </div>
                    </div>

                    

                    <div class="form-group">
                        <label for="MemSkills">Skills other than sewing (optional)</label>
                        <input type="text" id="MemSkills" name="memskills" value="<%= user?.memskills || '' %>">
                    </div>

                    <div class="form-group">
                        <label>Can you teach others to sew?</label>
                        <div class="radio-option">
                            <input type="radio" id="teachYes" name="can_teach" value="true" <%= user?.can_teach === true ? 'checked' : '' %> required>
                            <label for="teachYes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teachNo" name="can_teach" value="false" <%= user?.can_teach === false ? 'checked' : '' %>>
                            <label for="teachNo">No</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Would you be willing to take the lead at an event?</label>
                        <div class="radio-option">
                            <input type="radio" id="leadYes" name="event_lead" value="yes" <%= user?.event_lead === 'yes' ? 'checked' : '' %> required>
                            <label for="leadYes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="leadNo" name="event_lead" value="no" <%= user?.event_lead === 'no' ? 'checked' : '' %>>
                            <label for="leadNo">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="leadMaybe" name="event_lead" value="maybe" <%= user?.event_lead === 'maybe' ? 'checked' : '' %>>
                            <label for="leadMaybe">Maybe</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="MemHoursMonthly">Number of hours willing to volunteer per month:</label>
                        <input type="number" id="MemHoursMonthly" name="memhoursmonthly" value="<%= user?.memhoursmonthly || '' %>" required>
                    </div>

                    <div class="form-group">
                        <label for="MemVolunteerLocation">What areas of Utah are you willing to volunteer in?</label>
                        <div id="MemVolunteerLocation">
                            <div class="checkbox-group">
                                <label for="Provo">Provo</label>
                                <input type="checkbox" id="Provo" name="memvolunteerlocation[]" value="Provo" <%= user?.memvolunteerlocation?.includes('Provo') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="AmericanFork">American Fork</label>
                                <input type="checkbox" id="AmericanFork" name="memvolunteerlocation[]" value="American Fork" <%= user?.memvolunteerlocation?.includes('American Fork') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Riverton">Riverton</label>
                                <input type="checkbox" id="Riverton" name="memvolunteerlocation[]" value="Riverton" <%= user?.memvolunteerlocation?.includes('Riverton') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Sandy">Sandy</label>
                                <input type="checkbox" id="Sandy" name="memvolunteerlocation[]" value="Sandy" <%= user?.memvolunteerlocation?.includes('Sandy') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="SaltLakeCity">Salt Lake City</label>
                                <input type="checkbox" id="SaltLakeCity" name="memvolunteerlocation[]" value="Salt Lake City" <%= user?.memvolunteerlocation?.includes('Salt Lake City') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Bountiful">Bountiful</label>
                                <input type="checkbox" id="Bountiful" name="memvolunteerlocation[]" value="Bountiful" <%= user?.memvolunteerlocation?.includes('Bountiful') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Farmington">Farmington</label>
                                <input type="checkbox" id="Farmington" name="memvolunteerlocation[]" value="Farmington" <%= user?.memvolunteerlocation?.includes('Farmington') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Layton">Layton</label>
                                <input type="checkbox" id="Layton" name="memvolunteerlocation[]" value="Layton" <%= user?.memvolunteerlocation?.includes('Layton') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Ogden">Ogden</label>
                                <input type="checkbox" id="Ogden" name="memvolunteerlocation[]" value="Ogden" <%= user?.memvolunteerlocation?.includes('Ogden') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="BrighamCity">Brigham City</label>
                                <input type="checkbox" id="BrighamCity" name="memvolunteerlocation[]" value="Brigham City" <%= user?.memvolunteerlocation?.includes('Brigham City') ? 'checked' : '' %> >
                            </div>
                            <div class="checkbox-group">
                                <label for="Logan">Logan</label>
                                <input type="checkbox" id="Logan" name="memvolunteerlocation[]" value="Logan" <%= user?.memvolunteerlocation?.includes('Logan') ? 'checked' : '' %> >
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="ReferralType">How did you hear about the opportunity?</label>
                        <select id="ReferralType" name="referral_type" required>
                            <option value="Friend/Family" <%= user?.referral_type === 'Friend/Family' ? 'selected' : '' %>>Friend/Family</option>
                            <option value="Turtle Shell Volunteer" <%= user?.referral_type === 'Turtle Shell Volunteer' ? 'selected' : '' %>>Turtle Shell Volunteer</option>
                            <option value="Search Engine" <%= user?.referral_type === 'Search Engine' ? 'selected' : '' %>>Search Engine</option>
                            <option value="Social Media" <%= user?.referral_type === 'Social Media' ? 'selected' : '' %>>Social Media</option>
                            <option value="Work" <%= user?.referral_type === 'Work' ? 'selected' : '' %>>Work</option>
                            <option value="Blog/Article" <%= user?.referral_type === 'Blog/Article' ? 'selected' : '' %>>Blog/Article</option>
                            <option value="News/Media" <%= user?.referral_type === 'News/Media' ? 'selected' : '' %>>News/Media</option>
                            <option value="Event/Conference" <%= user?.referral_type === 'Event/Conference' ? 'selected' : '' %>>Event/Conference</option>
                            <option value="Other" <%= user?.referral_type === 'Other' ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <button type="submit" class="submit-btn">Save Changes</button>
                </form>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const navLinks = document.querySelectorAll(".settings-nav .nav-link");
            const sections = document.querySelectorAll(".settings-section");

            navLinks.forEach(link => {
                link.addEventListener("click", (event) => {
                    event.preventDefault();

                    // Remove active class from all links and sections
                    navLinks.forEach(nav => nav.classList.remove("active"));
                    sections.forEach(section => section.classList.remove("active"));

                    // Add active class to the clicked link and its corresponding section
                    link.classList.add("active");
                    const sectionId = link.id.replace("-link", "-section");
                    document.getElementById(sectionId).classList.add("active");
                });
            });
        });
    </script>

    <footer>
        <a href="https://www.facebook.com/turtleshelterproject/" target="_blank" class="footer-link"> 
            <img src="facebook-logo.jpg" alt="Facebook" class="footer-img"> </a> 
        <p>
            Turtle Shelter Project, PO Box 382, Kaysville, UT 84037 &nbsp; | &nbsp; 801-872-3190 &nbsp; | &nbsp; turtleshelterproject@gmail.com 
        </p>
    </footer>
    
</body>
</html>