<!DOCTYPE html>
<html lang="en">
    <%- include('partials/navbar') %>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>User Settings</title>
</head>
<body class="usersettings-page">
    <section class="hero">
    </section>
    <div class="settings-page">
        <!-- Left Navigation Column -->
        <div id="settings-container">
            <nav class="settings-nav">
                <ul>
                    <li><a href="#" class="nav-link active" id="reset-password-link">Reset Password</a></li>
                    <li><a href="#" class="nav-link" id="admin-key-link">Admin Key</a></li>
                    <li><a href="#" class="nav-link" id="edit-account-details-link">Edit Account Details</a></li>
                    <% if (user && user.role === 'admin') { %>
                        <!-- Add Admin Link -->
                        <li><a href="#" class="nav-link" id="add-admin-link">Add Admin</a></li>
                    <% } %>
                </ul>
            </nav>
        </div>

        <!-- Main Content Section -->
        <section class="settings-content">
            <div id="reset-password-section" class="settings-section active">
                <h2>Reset Password</h2>
                <form action="/teammembers/change-password" method="POST" class="change-password-form">
                    <div class="form-group">
                        <label for="current-password">Current Password</label>
                        <input type="password" id="current-password" name="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" name="newPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" name="confirmPassword" required>
                    </div>
                    <button type="submit" class="submit-btn">Change Password</button>
                </form>
            </div>

            <div id="admin-key-section" class="settings-section">
                <h2>Change Admin Key</h2>
                <form action="/teammembers/change-admin-key" method="POST" class="change-admin-key-form">
                    <div class="form-group">
                        <label for="current-admin-key">Current Admin Key</label>
                        <input type="text" id="current-admin-key" name="currentAdminKey" required>
                    </div>
                    <div class="form-group">
                        <label for="new-admin-key">New Admin Key</label>
                        <input type="text" id="new-admin-key" name="newAdminKey" required>
                    </div>
                    <button type="submit" class="submit-btn">Change Admin Key</button>
                </form>
            </div>

            <div id="edit-account-details-section" class="settings-section">
                <h2>Edit Account Details</h2>
                <form action="/teammembers/edit-account" method="POST" class="edit-account-form">
                    <div class="form-group">
                        <label for="edit-first-name">First Name</label>
                        <input type="text" id="edit-first-name" name="memfirstname" value="<%= user?.memfirstname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-last-name">Last Name</label>
                        <input type="text" id="edit-last-name" name="memlastname" value="<%= user?.memlastname || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-username">Username</label>
                        <input type="text" id="edit-username" name="username" value="<%= user?.username || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-email">E-Mail</label>
                        <input type="email" id="edit-email" name="mememail" value="<%= user?.mememail || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-phone-number">Phone Number</label>
                        <input type="tel" id="edit-phone-number" name="memphone" value="<%= user?.memphone || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">Street Address</label>
                        <input type="text" id="edit-address" name="memstraddress" value="<%= user?.memstraddress || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-city">City</label>
                        <input type="text" id="edit-city" name="memcity" value="<%= user?.memcity || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-state">State</label>
                        <input type="text" id="edit-state" name="memstate" value="<%= user?.memstate || '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-zip">ZIP Code</label>
                        <input type="text" id="edit-zip" name="memzip" value="<%= user?.memzip || '' %>" required>
                    </div>
                    <button type="submit" class="submit-btn">Save Changes</button>
                </form>
            </div>

            <!-- Add Admin Section -->
            <div id="add-admin-section" class="settings-section">
                <h2>Add Admin</h2>
                <form action="/teammembers/add-admin" method="POST">
        
                    <!-- First Name -->
                    <div class="form-group">
                        <label for="MemFirstName">First Name:</label>
                        <input type="text" id="MemFirstName" name="MemFirstName" required>
                    </div>
            
                    <!-- Last Name -->
                    <div class="form-group">
                        <label for="MemLastName">Last Name:</label>
                        <input type="text" id="MemLastName" name="MemLastName" required>
                    </div>
            
                    <!-- Username -->
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" required>
                    </div>
            
                    <!-- Password -->
                    <div class="form-group">
                        <label for="VolPassword">Password:</label>
                        <input type="password" id="VolPassword" name="VolPassword" required>
                    </div>
            
                    <!-- E-Mail -->
                    <div class="form-group">
                        <label for="MemEmail">E-Mail:</label>
                        <input type="email" id="MemEmail" name="MemEmail" required>
                    </div>
            
                    <!-- Phone Number -->
                    <div class="form-group">
                        <label for="MemPhoneNumber">Phone Number:</label>
                        <input type="tel" id="MemPhoneNumber" name="MemPhoneNumber" required>
                    </div>
            
                    <!-- Street Address -->
                    <div class="form-group">
                        <label for="MemStrAddress">Street Address:</label>
                        <input type="text" id="MemStrAddress" name="MemStrAddress" required>
                    </div>
            
                    <!-- City -->
                    <div class="form-group">
                        <label for="MemCity">City:</label>
                        <input type="text" id="MemCity" name="MemCity" required>
                    </div>
            
                    <!-- State -->
                    <div class="form-group">
                        <label for="MemState">State:</label>
                        <input type="text" id="MemState" name="MemState" required>
                    </div>
            
                    <!-- ZIP Code -->
                    <div class="form-group">
                        <label for="MemZip">ZIP Code:</label>
                        <input type="text" id="MemZip" name="MemZip" required>
                    </div>
            
                    <!-- Sewing Level (Radio buttons) -->
                    <div class="form-group">
                        <label>Sewing Level:</label>
                        <div class="radio-option">
                            <input type="radio" id="none" name="MemSewingLevel" value="none" required>
                            <label for="none">None</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="beginner" name="MemSewingLevel" value="beginner">
                            <label for="beginner">Beginner</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="intermediate" name="MemSewingLevel" value="intermediate">
                            <label for="intermediate">Intermediate</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="experienced" name="MemSewingLevel" value="experienced">
                            <label for="experienced">Experienced</label>
                        </div>
                    </div>
            
                    <div class="form-group">
                        <label for="MemSkills">Skills other than sewing (optional):</label>
                        <input type="text" id="MemSkills" name="MemSkills">
                    </div>
            
                    <!-- Can you teach others to sew? (Radio buttons) -->
                    <div class="form-group">
                        <label>Can you teach others to sew?</label>
                        <div class="radio-option">
                            <input type="radio" id="teachYes" name="CanTeach" value="yes" required>
                            <label for="teachYes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="teachNo" name="CanTeach" value="no">
                            <label for="teachNo">No</label>
                        </div>
                    </div>
            
                    <!-- Would you be willing to take the lead at an event? (Radio buttons) -->
                    <div class="form-group">
                        <label>Would you be willing to take the lead at an event?</label>
                        <div class="radio-option">
                            <input type="radio" id="leadYes" name="TakeLead" value="yes" required>
                            <label for="leadYes">Yes</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="leadNo" name="TakeLead" value="no">
                            <label for="leadNo">No</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="leadMaybe" name="TakeLead" value="maybe">
                            <label for="leadMaybe">Maybe</label>
                        </div>
                    </div>
            
                    <!-- Volunteer Hours per Month -->
                    <div class="form-group">
                        <label for="MemHoursMonthly">Number of hours willing to volunteer per month:</label>
                        <input type="number" id="MemHoursMonthly" name="MemHoursMonthly" required>
                    </div>
            
                    <!-- Areas of Utah willing to volunteer in -->
                    <div class="form-group">
                        <label for="MemVolunteerLocation">What areas of Utah are you willing to volunteer in?</label>
                        <div id="MemVolunteerLocation">
                            <div>
                                <input type="checkbox" id="Provo" name="MemVolunteerLocation[]" value="Provo">
                                <label for="Provo">Provo</label>
                            </div>
                            <div>
                                <input type="checkbox" id="AmericanFork" name="MemVolunteerLocation[]" value="American Fork">
                                <label for="AmericanFork">American Fork</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Riverton" name="MemVolunteerLocation[]" value="Riverton">
                                <label for="Riverton">Riverton</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Sandy" name="MemVolunteerLocation[]" value="Sandy">
                                <label for="Sandy">Sandy</label>
                            </div>
                            <div>
                                <input type="checkbox" id="SaltLakeCity" name="MemVolunteerLocation[]" value="Salt Lake City">
                                <label for="SaltLakeCity">Salt Lake City</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Bountiful" name="MemVolunteerLocation[]" value="Bountiful">
                                <label for="Bountiful">Bountiful</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Farmington" name="MemVolunteerLocation[]" value="Farmington">
                                <label for="Farmington">Farmington</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Layton" name="MemVolunteerLocation[]" value="Layton">
                                <label for="Layton">Layton</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Ogden" name="MemVolunteerLocation[]" value="Ogden">
                                <label for="Ogden">Ogden</label>
                            </div>
                            <div>
                                <input type="checkbox" id="BrighamCity" name="MemVolunteerLocation[]" value="Brigham City">
                                <label for="BrighamCity">Brigham City</label>
                            </div>
                            <div>
                                <input type="checkbox" id="Logan" name="MemVolunteerLocation[]" value="Logan">
                                <label for="Logan">Logan</label>
                            </div>
                        </div>
                    </div>
            
                    <!-- Referral Type (How did you hear about the opportunity?) -->
                    <div class="form-group">
                        <label for="ReferralType">How did you hear about the opportunity?</label>
                        <select id="ReferralType" name="ReferralType" required>
                            <option value="Work">Work</option>
                            <option value="Turtle Shell Volunteer">Turtle Shell Volunteer</option>
                            <option value="Search Engine">Search Engine</option>
                            <option value="Social Media">Social Media</option>
                            <option value="Friend/Family">Friend/Family</option>
                            <option value="Blog/Article">Blog/Article</option>
                            <option value="News/Media">News/Media</option>
                            <option value="Event/Conference">Event/Conference</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
            
                    <!-- Submit Button -->
                    <div class="form-group">
                        <button type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const navLinks = document.querySelectorAll(".settings-nav .nav-link");
            const sections = document.querySelectorAll(".settings-section");

            navLinks.forEach(link => {
                link.addEventListener("click", (event) => {
                    event.preventDefault();

                    // Remove active class from all links and sections
                    navLinks.forEach(nav => nav.classList.remove("active"));
                    sections.forEach(section => section.classList.remove("active"));

                    // Add active class to the clicked link and its corresponding section
                    link.classList.add("active");
                    const sectionId = link.id.replace("-link", "-section");
                    document.getElementById(sectionId).classList.add("active");
                });
            });
        });
    </script>

    <footer>
        <a href="https://www.facebook.com/turtleshelterproject/" target="_blank" class="footer-link"> 
            <img src="facebook-logo.jpg" alt="Facebook" class="footer-img"> </a> 
        <p>
            Turtle Shelter Project, PO Box 382, Kaysville, UT 84037 &nbsp; | &nbsp; 801-872-3190 &nbsp; | &nbsp; turtleshelterproject@gmail.com 
        </p>
    </footer>
    
</body>
</html>